(this.webpackJsonpthesis=this.webpackJsonpthesis||[]).push([[0],{19:function(e,t,s){},38:function(e,t,s){},39:function(e,t,s){},64:function(e,t,s){"use strict";s.r(t);var i=s(2),a=s.n(i),n=s(32),c=s.n(n),r=(s(38),s(39),s(14)),l=s(8),o=(s(22),s(4)),d=s(5),h=s(1),j=s(7),u=s(6),p=(s(19),s(3)),b=s.n(p),m=s(0),O=function(e){Object(j.a)(s,e);var t=Object(u.a)(s);function s(e){var i;if(Object(o.a)(this,s),i=t.call(this,e),localStorage.getItem("user")){var a="hide",n="btn btn-outline-primary log";b.a.get("http://localhost:4000/offer/search/"+localStorage.getItem("user")).then((function(e){e.data.map((function(e){var t=i.state.notification;t.push(e),i.setState({notification:t})}))}))}else n="hide",a="btn btn-outline-primary log";return i.state={loginBtn:a,logoutBtn:n,search:"",notification:[]},i.logout=i.logout.bind(Object(h.a)(i)),i.onChangeSearch=i.onChangeSearch.bind(Object(h.a)(i)),i.handleSubmitSearch=i.handleSubmitSearch.bind(Object(h.a)(i)),i}return Object(d.a)(s,[{key:"onChangeSearch",value:function(e){this.setState({search:e.target.value})}},{key:"handleSubmitSearch",value:function(e){e.preventDefault(),window.location.replace("http://localhost:3000/search/"+this.state.search)}},{key:"logout",value:function(){localStorage.removeItem("user"),window.location.replace("http://localhost:3000/")}},{key:"render",value:function(){return Object(m.jsxs)("div",{className:"navbar",children:[Object(m.jsx)("div",{className:"navbar-left",children:Object(m.jsxs)("ul",{className:"nav",children:[Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(r.b,{to:"/thesis",children:"Home"})}),Object(m.jsx)("p",{className:"seperator",children:" | "}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)("span",{children:"MA - "})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)("span",{children:"Boston"})})]})}),Object(m.jsx)("div",{className:"navbar-search",children:Object(m.jsx)("div",{className:"input-group",children:Object(m.jsxs)("form",{onSubmit:this.handleSubmitSearch,children:[Object(m.jsx)("input",{type:"search",className:"form-control rounded",placeholder:"Search","aria-label":"Search","aria-describedby":"search-addon",value:this.state.search,onChange:this.onChangeSearch,required:"true"}),Object(m.jsx)("button",{type:"submit",className:"btn btn-outline-primary",children:"search"})]})})}),Object(m.jsxs)("div",{className:"navbar-right",children:[Object(m.jsx)(r.b,{to:"/log",children:Object(m.jsx)("button",{type:"button",className:this.state.loginBtn,children:"Login/signup"})}),Object(m.jsx)(r.b,{to:"/profile",children:Object(m.jsx)("button",{className:this.state.logoutBtn,children:localStorage.getItem("user")})}),Object(m.jsx)("button",{className:this.state.logoutBtn,type:"button",onClick:this.logout,children:"Logout"})]})]})}}]),s}(i.Component),v=function(e){Object(j.a)(s,e);var t=Object(u.a)(s);function s(e){return Object(o.a)(this,s),t.call(this,e)}return Object(d.a)(s,[{key:"Category_electronic",value:function(e){window.location.replace("http://localhost:3000/search/electronic")}},{key:"Category_kitchenUtensils",value:function(e){window.location.replace("http://localhost:3000/search/kitchen")}},{key:"Category_furniture",value:function(e){window.location.replace("http://localhost:3000/search/furniture")}},{key:"Category_home",value:function(e){window.location.replace("http://localhost:3000/search/home")}},{key:"render",value:function(){return Object(m.jsxs)("div",{className:"home",children:[Object(m.jsxs)("div",{className:"catFirstRow",children:[Object(m.jsx)("div",{className:"responsive",children:Object(m.jsxs)("div",{className:"categories",children:[Object(m.jsx)("a",{onClick:this.Category_electronic,children:Object(m.jsx)("img",{className:"home-category",src:"https://shuminye.neocities.org/thesis/electronic.png"})}),Object(m.jsx)("br",{}),Object(m.jsx)("h5",{className:"home-category",children:"Electronic"})]})}),Object(m.jsx)("div",{className:"responsive",children:Object(m.jsxs)("div",{className:"categories",children:[Object(m.jsx)("a",{onClick:this.Category_kitchenUtensils,children:Object(m.jsx)("img",{src:"https://shuminye.neocities.org/thesis/kitchen%20utensils.jpg"})}),Object(m.jsx)("br",{}),Object(m.jsx)("h5",{className:"home-category",children:"Kitchen"})]})})]}),Object(m.jsxs)("div",{className:"catSecondRow",children:[Object(m.jsx)("div",{className:"responsive",children:Object(m.jsxs)("div",{className:"categories",children:[Object(m.jsx)("a",{onClick:this.Category_furniture,children:Object(m.jsx)("img",{src:"https://shuminye.neocities.org/thesis/furniture.jpg"})}),Object(m.jsx)("br",{}),Object(m.jsx)("h5",{className:"home-category",children:"Furniture"})]})}),Object(m.jsx)("div",{className:"responsive",children:Object(m.jsxs)("div",{className:"categories",children:[Object(m.jsx)("a",{onClick:this.Category_home,children:Object(m.jsx)("img",{src:"https://shuminye.neocities.org/thesis/home.jpg"})}),Object(m.jsx)("br",{}),Object(m.jsx)("h5",{className:"home-category",children:"Home"})]})})]})]})}}]),s}(i.Component),g=[],f=function(e){return Object(m.jsxs)("div",{className:"Post",children:[Object(m.jsxs)("h6",{children:[e.result.type,"\u2002\u2002",Object(m.jsx)(r.b,{to:"/detail/"+e.result._id,children:e.result.title}),"\u2002\u2002",e.result.condition,"\u2002\u2002\u2002\u2002",e.result.createdAt.slice(0,10)+" "+e.result.createdAt.slice(11,16)]}),Object(m.jsxs)("div",{className:"post-gallery",children:[Object(m.jsx)("div",{className:"post-gallery-images",children:Object(m.jsx)("img",{width:"150",height:"150",src:e.result.image})}),Object(m.jsxs)("div",{className:"post-gallery-info",children:[Object(m.jsx)("img",{className:"search-author",src:"https://shuminye.neocities.org/thesis/post/profile.png"}),Object(m.jsx)(r.b,{to:"/rating/"+e.result.author,children:e.result.author})]})]}),Object(m.jsxs)("h6",{className:"post-geoprice-info",children:[e.result.address," ",e.result.address," \u2002 \u2002 \u2002 $",e.result.price]})]})},x=function(e){Object(j.a)(s,e);var t=Object(u.a)(s);function s(e){var i;return Object(o.a)(this,s),(i=t.call(this,e)).state={shownResults:[],results:[],authors:[],value_type:"",filter_type:"",filters:{status:"available"}},i.onChangeFilterType=i.onChangeFilterType.bind(Object(h.a)(i)),i.onChangeFilterCondition=i.onChangeFilterCondition.bind(Object(h.a)(i)),i.onChangeFilterStatus=i.onChangeFilterStatus.bind(Object(h.a)(i)),i.onChangeFilterPriceMin=i.onChangeFilterPriceMin.bind(Object(h.a)(i)),i.onChangeFilterPriceMax=i.onChangeFilterPriceMax.bind(Object(h.a)(i)),i.onChangeFilterCategory=i.onChangeFilterCategory.bind(Object(h.a)(i)),i.typeFilter=i.typeFilter.bind(Object(h.a)(i)),i.applyFilters=i.applyFilters.bind(Object(h.a)(i)),i}return Object(d.a)(s,[{key:"componentDidMount",value:function(){var e=this;b.a.post("http://localhost:4000/post/search/"+this.props.match.params.keyword).then((function(t){e.setState({shownResults:t.data,results:t.data})})).then((function(){e.applyFilters(),e.state.results.map((function(e){b.a.get("http://localhost:4000/user/"+e.author).then((function(e){g.push(e.data)}))}))}))}},{key:"result",value:function(){return this.state.shownResults.map((function(e,t){return Object(m.jsx)(f,{result:e,author:g[t]})}))}},{key:"typeFilter",value:function(e,t){return"all"!==t&&e.type===t||"all"===t?e:void 0}},{key:"onChangeFilterType",value:function(e){this.state.filters.type=e.target.value,this.applyFilters()}},{key:"onChangeFilterCondition",value:function(e){this.state.filters.condition=e.target.value,this.applyFilters()}},{key:"onChangeFilterStatus",value:function(e){this.state.filters.status=e.target.value,this.applyFilters()}},{key:"onChangeFilterCategory",value:function(e){this.state.filters.category=e.target.value,this.applyFilters()}},{key:"onChangeFilterPriceMin",value:function(e){var t=this.state.filters;e.target.value>=0&&(t.minPrice=e.target.value),this.applyFilters()}},{key:"onChangeFilterPriceMax",value:function(e){var t=this.state.filters;e.target.value>0&&(t.maxPrice=e.target.value),e.target.value||(t.maxPrice=999999),console.log(e.target.value),this.applyFilters()}},{key:"applyFilters",value:function(){var e=this.state.filters,t=this.state.results;e.condition&&(t=t.filter((function(t){if(t.condition===e.condition)return t}))),e.category&&(t=t.filter((function(t){if(t.category===e.category)return t}))),e.status&&(t=t.filter((function(t){if(t.status===e.status)return t}))),e.type&&(t=t.filter((function(t){if(t.type===e.type)return t}))),e.minPrice>=0&&(t=t.filter((function(t){if(t.price>=e.minPrice)return t}))),e.maxPrice>=0&&(t=t.filter((function(t){if(t.price<=e.maxPrice)return t}))),this.setState({shownResults:t})}},{key:"render",value:function(){return Object(m.jsxs)("div",{className:"search",children:[Object(m.jsx)("div",{className:"container-fluid",children:Object(m.jsxs)("div",{className:"row",id:"fs_app",children:[Object(m.jsxs)("div",{className:"contents",children:[Object(m.jsxs)("form",{children:[Object(m.jsx)("span",{className:"heading",children:"By Price"}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{for:"min",children:"min"}),Object(m.jsx)("input",{type:"number",id:"min",name:"type",onChange:this.onChangeFilterPriceMin,min:"0",className:"filter_price"}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{for:"max",children:"max"}),Object(m.jsx)("input",{type:"number",id:"max",name:"type",onChange:this.onChangeFilterPriceMax,max:"999999",className:"filter_price"})]}),Object(m.jsx)("hr",{})]}),Object(m.jsxs)("div",{className:"contents",children:[Object(m.jsxs)("form",{children:[Object(m.jsx)("span",{className:"heading",children:"By Type \xa0\xa0"}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{type:"radio",id:"all",name:"type",value:"",onChange:this.onChangeFilterType,defaultChecked:!0}),Object(m.jsx)("label",{for:"all",children:"all"}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{type:"radio",id:"buy",name:"type",value:"buy",onChange:this.onChangeFilterType}),Object(m.jsx)("label",{for:"buy",children:"buy"}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{type:"radio",id:"sell",name:"type",value:"sell",onChange:this.onChangeFilterType}),Object(m.jsx)("label",{for:"sell",children:"sell"})]}),Object(m.jsx)("hr",{})]}),Object(m.jsxs)("div",{className:"contents",children:[Object(m.jsxs)("form",{children:[Object(m.jsx)("span",{className:"heading",children:"By Category"}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{type:"radio",id:"all",name:"category",value:"",onChange:this.onChangeFilterCategory,defaultChecked:!0}),Object(m.jsx)("label",{for:"all",children:"all"}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{type:"radio",id:"electronic",name:"category",value:"electronic",onChange:this.onChangeFilterCategory}),Object(m.jsx)("label",{for:"electronic",children:"electronic"}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{type:"radio",id:"kitchen",name:"category",value:"kitchen",onChange:this.onChangeFilterCategory}),Object(m.jsx)("label",{for:"kitchen",children:"kitchen"}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{type:"radio",id:"furniture",name:"category",value:"furniture",onChange:this.onChangeFilterCategory}),Object(m.jsx)("label",{for:"furniture",children:"furniture"}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{type:"radio",id:"home",name:"category",value:"home",onChange:this.onChangeFilterCategory}),Object(m.jsx)("label",{for:"home",children:"home"})]}),Object(m.jsx)("hr",{})]}),Object(m.jsxs)("div",{className:"contents",children:[Object(m.jsxs)("form",{children:[Object(m.jsx)("span",{className:"heading",children:"By Condition"}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{type:"radio",id:"all",name:"condition",value:"",onChange:this.onChangeFilterCondition,defaultChecked:!0}),Object(m.jsx)("label",{for:"all",children:"all"}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{type:"radio",id:"brand new",name:"condition",value:"brand new",onChange:this.onChangeFilterCondition}),Object(m.jsx)("label",{for:"brand new",children:"brand new"}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{type:"radio",id:"like new",name:"condition",value:"like new",onChange:this.onChangeFilterCondition}),Object(m.jsx)("label",{for:"like new",children:"like new"}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{type:"radio",id:"good",name:"condition",value:"good",onChange:this.onChangeFilterCondition}),Object(m.jsx)("label",{for:"good",children:"good"}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{type:"radio",id:"fair",name:"condition",value:"fair",onChange:this.onChangeFilterCondition}),Object(m.jsx)("label",{for:"fair",children:"fair"}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{type:"radio",id:"poor",name:"condition",value:"poor",onChange:this.onChangeFilterCondition}),Object(m.jsx)("label",{for:"poor",children:"poor"})]}),Object(m.jsx)("hr",{})]})]})}),this.result()]})}}]),s}(i.Component),_=function(e){Object(j.a)(s,e);var t=Object(u.a)(s);function s(e){var i;return Object(o.a)(this,s),(i=t.call(this,e)).state={user:{createdAt:"",updatedAt:"",negativeComments:[{createdAt:""}],positiveComments:[{createdAt:""}]},dealtPost:[],offerMade:[],sellPosts:[],buyPosts:[],class_positiveComment:"",class_negativeComment:""},i.displayPositiveComments=i.displayPositiveComments.bind(Object(h.a)(i)),i.displayNegativeComments=i.displayNegativeComments.bind(Object(h.a)(i)),i.handleChangeRadio=i.handleChangeRadio.bind(Object(h.a)(i)),i}return Object(d.a)(s,[{key:"componentDidMount",value:function(){this.retriveData()}},{key:"retriveData",value:function(){var e=this;b.a.get("http://localhost:4000/user/"+this.props.match.params.username).then((function(t){e.setState({user:t.data})})),b.a.get("http://localhost:4000/post/get/dealtPost/"+this.props.match.params.username).then((function(t){e.setState({dealtPost:t.data})})),b.a.get("http://localhost:4000/offer/get/offerMade/"+this.props.match.params.username).then((function(t){e.setState({offerMade:t.data})}))}},{key:"displayPositiveComments",value:function(){return this.state.user.positiveComments.map((function(e){return Object(m.jsxs)("div",{className:"rating-tradeHistory-comments",children:[Object(m.jsx)("p",{children:"positive"}),Object(m.jsx)("img",{className:"rating-tradeHistory-comments-profile",src:"https://shuminye.neocities.org/thesis/post/profile.png"}),Object(m.jsx)("h6",{children:e.user}),Object(m.jsx)("p",{children:e.postType}),Object(m.jsx)("p",{children:e.postTitle}),Object(m.jsx)("p",{children:Object(m.jsx)("b",{children:e.comment})})]})}))}},{key:"displayNegativeComments",value:function(){return this.state.user.negativeComments.map((function(e){return Object(m.jsxs)("div",{className:"rating-tradeHistory-comments",children:[Object(m.jsx)("p",{children:"negative"}),Object(m.jsx)("img",{className:"rating-tradeHistory-comments-profile",src:"https://shuminye.neocities.org/thesis/post/profile.png"}),Object(m.jsx)("h6",{children:e.user}),Object(m.jsx)("p",{children:e.postType}),Object(m.jsx)("p",{children:e.postTitle}),Object(m.jsx)("p",{children:Object(m.jsx)("b",{children:e.comment})})]})}))}},{key:"handleChangeRadio",value:function(e){switch(e.target.value){case"all":this.setState({class_positiveComment:"",class_negativeComment:""});break;case"positive":this.setState({class_positiveComment:"",class_negativeComment:"hide"});break;case"negative":this.setState({class_positiveComment:"hide",class_negativeComment:""})}}},{key:"render",value:function(){return Object(m.jsxs)("div",{className:"rating",children:[Object(m.jsxs)("div",{className:"rating-profile",children:[Object(m.jsx)("img",{className:"rating-profile-image",src:"https://shuminye.neocities.org/thesis/post/profile.png"}),Object(m.jsxs)("div",{className:"rating-profile-info",children:[Object(m.jsxs)("h5",{children:["username: ",this.state.user.username]}),Object(m.jsxs)("h5",{children:["reputation points:"," ",this.state.user.positiveComments.length-5*this.state.user.negativeComments.length]})]})]}),Object(m.jsxs)("div",{className:"rating-userInfo",children:[Object(m.jsxs)("div",{className:"rating-userInfo-div1",children:[Object(m.jsxs)("h6",{children:["Account created date ",Object(m.jsx)("br",{})," ",this.state.user.createdAt.slice(0,10)]}),Object(m.jsxs)("h6",{children:["Positive comments received ",Object(m.jsx)("br",{})," ",this.state.user.positiveComments.length]}),Object(m.jsxs)("h6",{children:["Negative comments received",Object(m.jsx)("br",{}),this.state.user.negativeComments.length]})]}),Object(m.jsxs)("div",{className:"rating-userInfo-div2",children:[Object(m.jsxs)("h6",{children:["Last activity date ",Object(m.jsx)("br",{})," ",this.state.user.updatedAt.slice(0,10)]}),Object(m.jsxs)("h6",{children:["Items traded ",Object(m.jsx)("br",{}),this.state.dealtPost.length]}),Object(m.jsxs)("h6",{children:["Offers made",Object(m.jsx)("br",{}),this.state.offerMade.length]})]})]}),Object(m.jsx)("div",{className:"rating-tradeHistory",children:Object(m.jsxs)("div",{className:"rating-tradeHistory-radio",children:[Object(m.jsx)("input",{type:"radio",value:"all",className:"rating-radio",name:"comment",id:"all",onChange:this.handleChangeRadio,defaultChecked:!0}),Object(m.jsx)("label",{for:"all",children:"All"}),Object(m.jsx)("input",{type:"radio",value:"positive",className:"rating-radio",name:"comment",id:"positive",onChange:this.handleChangeRadio}),Object(m.jsx)("label",{for:"positive",children:"Postive"}),Object(m.jsx)("input",{type:"radio",value:"negative",className:"rating-radio",name:"comment",id:"negative",onChange:this.handleChangeRadio}),Object(m.jsx)("label",{for:"negative",children:"Negative"})]})}),Object(m.jsxs)("div",{className:"rating-tradeHistory-comments",children:[Object(m.jsx)("p",{children:Object(m.jsx)("b",{children:"Attitude"})}),Object(m.jsx)("p",{children:Object(m.jsx)("b",{children:"User"})}),Object(m.jsx)("p",{children:Object(m.jsx)("b",{children:"Trade type"})}),Object(m.jsx)("p",{children:Object(m.jsx)("b",{children:"Item"})}),Object(m.jsx)("p",{children:Object(m.jsx)("b",{children:"Comment"})})]}),Object(m.jsx)("div",{className:this.state.class_positiveComment,children:this.displayPositiveComments()}),Object(m.jsx)("div",{className:this.state.class_negativeComment,children:this.displayNegativeComments()})]})}}]),s}(i.Component),y=function(e){Object(j.a)(s,e);var t=Object(u.a)(s);function s(e){var i;return Object(o.a)(this,s),(i=t.call(this,e)).state={creator_post_buy:[{title:""}],creator_post_sell:[{title:""}],recipient_post_buy:[{title:""}],recipient_post_sell:[{title:""}],creator_offer_item:[],recipient_offer_item:[],popup1_class:"popup-hide",popup2_class:"popup-hide",tr_class_creator:[],tr_class_recipient:[],div_class_creator:[],div_class_recipient:[],currency_creator:0,currency_recipient:0,totalValue_creator:0,totalValue_recipient:0,message:"",class_message:"hide"},i.popup1_open=i.popup1_open.bind(Object(h.a)(i)),i.popup1_close=i.popup1_close.bind(Object(h.a)(i)),i.popup2_open=i.popup2_open.bind(Object(h.a)(i)),i.popup2_close=i.popup2_close.bind(Object(h.a)(i)),i.addToOffer_creator=i.addToOffer_creator.bind(Object(h.a)(i)),i.removeFromOffer_creator=i.removeFromOffer_creator.bind(Object(h.a)(i)),i.displayAddedItem_creator=i.displayAddedItem_creator.bind(Object(h.a)(i)),i.addToOffer_recipient=i.addToOffer_recipient.bind(Object(h.a)(i)),i.removeFromOffer_recipient=i.removeFromOffer_recipient.bind(Object(h.a)(i)),i.displayAddedItem_recipient=i.displayAddedItem_recipient.bind(Object(h.a)(i)),i.define_tr_creator=i.define_tr_creator.bind(Object(h.a)(i)),i.define_tr_recipient=i.define_tr_recipient.bind(Object(h.a)(i)),i.onChangeCurrencyCreator=i.onChangeCurrencyCreator.bind(Object(h.a)(i)),i.onChangeCurrencyRecipient=i.onChangeCurrencyRecipient.bind(Object(h.a)(i)),i.onChangeMessage=i.onChangeMessage.bind(Object(h.a)(i)),i.sendOffer=i.sendOffer.bind(Object(h.a)(i)),i.closeMessage=i.closeMessage.bind(Object(h.a)(i)),i}return Object(d.a)(s,[{key:"componentDidMount",value:function(){this.retriveData()}},{key:"retriveData",value:function(){var e=this;b.a.post("http://localhost:4000/post/find/status",{author:localStorage.getItem("user"),type:"sell",status:"available"}).then((function(t){e.setState({creator_post_sell:t.data})})).then((function(){var t=e.state.creator_post_sell;t.map((function(e,t){e.No=t})),e.setState({creator_post_sell:t})})),b.a.post("http://localhost:4000/post/find/status",{author:this.props.match.params.username,type:"sell",status:"available"}).then((function(t){e.setState({recipient_post_sell:t.data})})).then((function(){var t=e.state.recipient_post_sell;t.map((function(e,t){e.No=t})),e.setState({recipient_post_sell:t})}))}},{key:"popup1_open",value:function(){"popup-hide"==this.state.popup1_class&&this.setState({popup1_class:"popup"})}},{key:"popup2_open",value:function(){"popup-hide"==this.state.popup2_class&&this.setState({popup2_class:"popup"})}},{key:"popup1_close",value:function(){this.setState({popup1_class:"popup-hide"})}},{key:"popup2_close",value:function(){this.setState({popup2_class:"popup-hide"})}},{key:"addToOffer_creator",value:function(e,t){var s=this.state.creator_offer_item;s.push(this.state.creator_post_sell[t]);var i=this.state.tr_class_creator;i[t]="hide";var a=this.state.div_class_creator;a[t]="";var n=this.state.totalValue_creator;n+=e.price,this.setState({creator_offer_item:s,tr_class_creator:i,div_class_creator:a,totalValue_creator:n})}},{key:"addToOffer_recipient",value:function(e,t){var s=this.state.recipient_offer_item;s.push(this.state.recipient_post_sell[t]);var i=this.state.tr_class_recipient;i[t]="hide";var a=this.state.div_class_recipient;a[t]="";var n=this.state.totalValue_recipient;n+=e.price,this.setState({recipient_offer_item:s,tr_class_recipient:i,div_class_recipient:a,totalValue_recipient:n})}},{key:"removeFromOffer_creator",value:function(e,t){var s=this.state.div_class_creator;s.splice(t,1);var i=this.state.creator_offer_item;i.splice(t,1);var a=this.state.tr_class_creator;a[e.No]="";var n=this.state.totalValue_creator;n-=e.price,this.setState({creator_offer_item:i,div_class_creator:s,tr_class_creator:a,totalValue_creator:n})}},{key:"removeFromOffer_recipient",value:function(e,t){var s=this.state.div_class_recipient;s.splice(t,1);var i=this.state.recipient_offer_item;i.splice(t,1);var a=this.state.tr_class_recipient;a[e.No]="";var n=this.state.totalValue_recipient;n-=e.price,this.setState({recipient_offer_item:i,div_class_recipient:s,tr_class_recipient:a,totalValue_recipient:n})}},{key:"displayAddedItem_creator",value:function(){var e=this;return this.state.creator_offer_item.map((function(t,s){return Object(m.jsx)("div",{className:"trade-window-div-add",children:Object(m.jsxs)("div",{className:e.state.div_class_creator[s],children:[Object(m.jsx)("img",{className:"trade-window-img",src:t.image}),Object(m.jsx)("p",{children:t.title}),Object(m.jsx)("input",{type:"button",className:"trade-window-cancel",value:"remove",onClick:function(){return e.removeFromOffer_creator(t,s)}})]})})}))}},{key:"displayAddedItem_recipient",value:function(){var e=this;return this.state.recipient_offer_item.map((function(t,s){return Object(m.jsx)("div",{className:"trade-window-div-add",children:Object(m.jsxs)("div",{className:e.state.div_class_recipient[s],children:[Object(m.jsx)("img",{className:"trade-window-img",src:t.image}),Object(m.jsx)("p",{children:t.title}),Object(m.jsx)("input",{type:"button",className:"trade-window-cancel",value:"remove",onClick:function(){return e.removeFromOffer_recipient(t,s)}})]})})}))}},{key:"define_tr_creator",value:function(){var e=this;return this.state.creator_post_sell.map((function(t,s){return Object(m.jsxs)("tr",{className:e.state.tr_class_creator[s],children:[Object(m.jsx)("td",{children:t.title}),Object(m.jsx)("td",{children:t.price}),Object(m.jsx)("td",{children:Object(m.jsx)("button",{onClick:function(){return e.addToOffer_creator(t,s)},children:"Add to offer"})})]})}))}},{key:"define_tr_recipient",value:function(){var e=this;return this.state.recipient_post_sell.map((function(t,s){return Object(m.jsxs)("tr",{className:e.state.tr_class_recipient[s],children:[Object(m.jsx)("td",{children:t.title}),Object(m.jsx)("td",{children:t.price}),Object(m.jsx)("td",{children:Object(m.jsx)("button",{onClick:function(){return e.addToOffer_recipient(t,s)},children:"Add to offer"})})]})}))}},{key:"onChangeCurrencyCreator",value:function(e){this.setState({currency_creator:e.target.value})}},{key:"onChangeCurrencyRecipient",value:function(e){this.setState({currency_recipient:e.target.value})}},{key:"onChangeMessage",value:function(e){this.setState({message:e.target.value})}},{key:"sendOffer",value:function(){var e={creator:localStorage.getItem("user"),creatorItems:this.state.creator_offer_item,creatorCurrency:this.state.currency_creator,recipient:this.props.match.params.username,recipientItems:this.state.recipient_offer_item,recipientCurrency:this.state.currency_recipient,status:"in progress",message:this.state.message};b.a.post("http://localhost:4000/offer/add",e).then((function(e){}));for(var t=0;t<this.state.creator_offer_item.length;t++)b.a.post("http://localhost:4000/post/update/status/"+this.state.creator_offer_item[t]._id,{status:"temporarily unavailable"});this.setState({class_message:"popup"})}},{key:"closeMessage",value:function(){this.setState({class_message:"hide",creator_offer_item:[],recipient_offer_item:[],currency_creator:0,currency_recipient:0,totalValue_creator:0,totalValue_recipient:0,message:""})}},{key:"render",value:function(){return Object(m.jsxs)("div",{className:"trade",children:[Object(m.jsxs)("div",{className:"trade-window1",children:[Object(m.jsx)("h6",{children:"Your items"}),Object(m.jsx)("hr",{}),this.displayAddedItem_creator(),Object(m.jsx)("div",{className:"trade-window-div-add",children:Object(m.jsx)("div",{className:"trade-window-div",children:Object(m.jsx)("button",{onClick:this.popup1_open,className:"trade-window-add",children:Object(m.jsx)("span",{children:"+"})})})}),Object(m.jsxs)("h6",{className:"totalValue",children:["Total value: $",this.state.totalValue_creator]}),Object(m.jsx)("hr",{}),Object(m.jsx)("h6",{children:"Your currency"}),Object(m.jsx)("span",{children:"$"}),Object(m.jsx)("input",{type:"number",min:"0",value:this.state.currency_creator,onChange:this.onChangeCurrencyCreator}),Object(m.jsx)("hr",{}),Object(m.jsx)("h6",{children:"Include a message in your request"}),Object(m.jsx)("textarea",{rows:"4",cols:"40",value:this.state.message,onChange:this.onChangeMessage})]}),Object(m.jsxs)("div",{className:this.state.popup1_class,children:[Object(m.jsxs)("div",{className:"popup-content",children:[Object(m.jsx)("h6",{children:"You are selling:"}),Object(m.jsxs)("table",{children:[Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"Item"}),Object(m.jsx)("th",{children:"Price"}),Object(m.jsx)("th",{children:"Action"})]}),this.define_tr_creator()]})]}),Object(m.jsx)("button",{onClick:this.popup1_close,children:" Close "})]}),Object(m.jsxs)("div",{className:"trade-middle",children:[Object(m.jsx)("img",{}),Object(m.jsx)("input",{type:"button",value:"send offer",onClick:this.sendOffer})]}),Object(m.jsxs)("div",{className:"trade-window2",children:[Object(m.jsx)("h6",{children:"Their items"}),Object(m.jsx)("hr",{}),this.displayAddedItem_recipient(),Object(m.jsx)("div",{className:"trade-window-div-add",children:Object(m.jsx)("div",{className:"trade-window-div",children:Object(m.jsx)("button",{onClick:this.popup2_open,className:"trade-window-add",children:Object(m.jsx)("span",{children:"+"})})})}),Object(m.jsxs)("h6",{className:"totalValue",children:["Total value: $",this.state.totalValue_recipient]}),Object(m.jsx)("hr",{}),Object(m.jsx)("h6",{children:"Their currency"}),Object(m.jsx)("span",{children:"$"}),Object(m.jsx)("input",{type:"number",min:"0",value:this.state.currency_recipient,onChange:this.onChangeCurrencyRecipient})]}),Object(m.jsxs)("div",{className:this.state.popup2_class,children:[Object(m.jsxs)("div",{className:"popup-content",children:[Object(m.jsx)("h6",{children:"They are selling:"}),Object(m.jsxs)("table",{children:[Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"Item"}),Object(m.jsx)("th",{children:"Price"}),Object(m.jsx)("th",{children:"Action"})]}),this.define_tr_recipient()]})]}),Object(m.jsx)("button",{onClick:this.popup2_close,children:" Close "})]}),Object(m.jsx)("div",{className:this.state.class_message,children:Object(m.jsxs)("div",{className:"popup-content",children:[Object(m.jsx)("h6",{children:"Offer sent!"}),Object(m.jsx)("input",{type:"button",value:"close",onClick:this.closeMessage})]})})]})}}]),s}(i.Component),C=function(e){Object(j.a)(s,e);var t=Object(u.a)(s);function s(e){var i;return Object(o.a)(this,s),(i=t.call(this,e)).state={isToggleOn:!1,classname:"container",username:"",email:"",password:"",confirmedpwd:"",confirmedpwd_alert:"hide",login_username:"",login_password:"",username_alert:"hide",password_alert:"hide",login_alert:"hide"},i.changeUsername=i.changeUsername.bind(Object(h.a)(i)),i.changeEmail=i.changeEmail.bind(Object(h.a)(i)),i.changePassword=i.changePassword.bind(Object(h.a)(i)),i.changeConfirmedpwd=i.changeConfirmedpwd.bind(Object(h.a)(i)),i.signupSubmit=i.signupSubmit.bind(Object(h.a)(i)),i.handleLoginUsername=i.handleLoginUsername.bind(Object(h.a)(i)),i.handleLoginPassword=i.handleLoginPassword.bind(Object(h.a)(i)),i.loginSubmit=i.loginSubmit.bind(Object(h.a)(i)),i.handleClick=i.handleClick.bind(Object(h.a)(i)),i}return Object(d.a)(s,[{key:"changeUsername",value:function(e){var t=this;this.setState({username:e.target.value},(function(){b.a.get("http://localhost:4000/user/"+t.state.username).then((function(e){e.data?t.setState({username_alert:""}):t.setState({username_alert:"hide"})}))}))}},{key:"changeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"changePassword",value:function(e){var t=this;this.setState({password:e.target.value},(function(){t.state.password.length<6&&t.state.password.length>0?t.setState({password_alert:""}):t.setState({password_alert:"hide"}),t.state.password===t.state.confirmedpwd||0==t.state.confirmedpwd.length?t.setState({confirmedpwd_alert:"hide"}):t.setState({confirmedpwd_alert:""})}))}},{key:"changeConfirmedpwd",value:function(e){var t=this;this.setState({confirmedpwd:e.target.value},(function(){t.state.password===t.state.confirmedpwd?t.setState({confirmedpwd_alert:"hide"}):t.setState({confirmedpwd_alert:""})}))}},{key:"signupSubmit",value:function(e){if(e.preventDefault(),this.state.password===this.state.confirmedpwd&&"hide"===this.state.username_alert){var t={username:this.state.username,email:this.state.email,password:this.state.password};b.a.post("http://localhost:4000/user/add",t),localStorage.setItem("user",this.state.username),window.location.replace("http://localhost:3000/")}}},{key:"handleLoginUsername",value:function(e){this.setState({login_username:e.target.value})}},{key:"handleLoginPassword",value:function(e){this.setState({login_password:e.target.value})}},{key:"loginSubmit",value:function(e){var t=this;e.preventDefault();var s={username:this.state.login_username,password:this.state.login_password};b.a.post("http://localhost:4000/user/login",s).then((function(e){e.data.length>0?(localStorage.setItem("user",e.data[0].username),t.setState({login_alert:"hide"}),window.location.replace("http://localhost:3000/")):t.setState({login_alert:""})}))}},{key:"handleClick",value:function(e){e.preventDefault(),this.state.isToggleOn?this.setState({isToggleOn:!1,classname:"container"}):this.setState({isToggleOn:!0,classname:"container active"})}},{key:"render",value:function(){return Object(m.jsx)("section",{children:Object(m.jsxs)("div",{className:this.state.classname,id:"container",children:[Object(m.jsxs)("div",{className:"user signinBx",children:[Object(m.jsx)("div",{className:"imgBx"}),Object(m.jsx)("div",{className:"formBx",children:Object(m.jsxs)("form",{onSubmit:this.loginSubmit,children:[Object(m.jsx)("h2",{children:"Sign In"}),Object(m.jsx)("input",{type:"text",name:"",placeholder:"Username",value:this.state.login_username,onChange:this.handleLoginUsername}),Object(m.jsx)("input",{type:"password",name:"",placeholder:"Password",value:this.state.login_password,onChange:this.handleLoginPassword}),Object(m.jsx)("p",{className:this.state.login_alert,children:"*Wrong username or password!"}),Object(m.jsx)("input",{type:"submit",name:"",value:"Login"}),Object(m.jsxs)("p",{class:"signup",children:["Don't have an account?"," ",Object(m.jsx)("a",{href:"",onClick:this.handleClick,children:"Sign up"})]})]})})]}),Object(m.jsxs)("div",{className:"user signupBx",children:[Object(m.jsx)("div",{className:"formBx",children:Object(m.jsxs)("form",{onSubmit:this.signupSubmit,children:[Object(m.jsx)("h2",{children:"Create a new account"}),Object(m.jsx)("input",{type:"text",name:"",placeholder:"Username",value:this.state.username,onChange:this.changeUsername}),Object(m.jsx)("p",{className:this.state.username_alert,children:"*Username occupied!"}),Object(m.jsx)("input",{type:"email",name:"",placeholder:"Email Address",value:this.state.email,onChange:this.changeEmail}),Object(m.jsx)("input",{type:"password",name:"",placeholder:"Create password",value:this.state.password,onChange:this.changePassword}),Object(m.jsx)("p",{className:this.state.password_alert,children:"*Require 6 or more characters!"}),Object(m.jsx)("input",{type:"password",name:"",placeholder:"Confirm password",value:this.state.confirmedpwd,onChange:this.changeConfirmedpwd}),Object(m.jsx)("p",{className:this.state.confirmedpwd_alert,children:"*Please input the same password"}),Object(m.jsx)("input",{type:"submit",name:"",value:"Sign Up"}),Object(m.jsxs)("p",{class:"signup",children:["Already have an account?"," ",Object(m.jsx)("a",{href:"",onClick:this.handleClick,children:"Sign in"})]})]})}),Object(m.jsx)("div",{className:"imgBx",children:Object(m.jsx)("img",{})})]})]})})}}]),s}(i.Component),k=function(e){Object(j.a)(s,e);var t=Object(u.a)(s);function s(e){var i;return Object(o.a)(this,s),(i=t.call(this,e)).state={post:{comments:[]},comment:"",class_buy:"hide",class_message:"hide",class_alert:"hide",class_popup_barter:"hide",class_alert_barter:"hide"},i.displayComments=i.displayComments.bind(Object(h.a)(i)),i.onChangeComment=i.onChangeComment.bind(Object(h.a)(i)),i.handleSubmitComment=i.handleSubmitComment.bind(Object(h.a)(i)),i.back_alert=i.back_alert.bind(Object(h.a)(i)),i.barter=i.barter.bind(Object(h.a)(i)),i.buy=i.buy.bind(Object(h.a)(i)),i.yes=i.yes.bind(Object(h.a)(i)),i.no=i.no.bind(Object(h.a)(i)),i.barter_yes=i.barter_yes.bind(Object(h.a)(i)),i.barter_no=i.barter_no.bind(Object(h.a)(i)),i.barter_back_alert=i.barter_back_alert.bind(Object(h.a)(i)),i}return Object(d.a)(s,[{key:"componentDidMount",value:function(){this.retriveData()}},{key:"retriveData",value:function(){var e=this;b.a.post("http://localhost:4000/post/get/"+this.props.match.params.id).then((function(t){e.setState({post:t.data})}))}},{key:"displayComments",value:function(){return this.state.post.comments.map((function(e){return Object(m.jsxs)("div",{className:"detail-display-comment",children:[Object(m.jsx)("h6",{children:e.user}),Object(m.jsx)("h6",{children:e.date}),Object(m.jsx)("p",{children:e.comment}),Object(m.jsx)("hr",{})]})}))}},{key:"onChangeComment",value:function(e){this.setState({comment:e.target.value})}},{key:"handleSubmitComment",value:function(e){var t=this;e.preventDefault();var s={user:localStorage.getItem("user"),date:(new Date).toString().slice(4,24),comment:this.state.comment};b.a.post("http://localhost:4000/post/update/comment/"+this.state.post._id,{comment:s}).then((function(){t.setState({comment:""})})).then((function(){t.retriveData()}))}},{key:"buy",value:function(){this.state.post.author!==localStorage.getItem("user")?this.setState({class_buy:"popup-edit"}):this.setState({class_alert:"popup-edit"})}},{key:"yes",value:function(){b.a.post("http://localhost:4000/post/update/status/"+this.state.post._id,{status:"dealt"}),b.a.post("http://localhost:4000/post/update/sellerOrBuyer/"+this.state.post._id,{sellerOrBuyer:localStorage.getItem("user")}),this.setState({class_message:"popup-edit"})}},{key:"no",value:function(){this.setState({class_buy:"hide"})}},{key:"back",value:function(){window.location.replace("http://localhost:3000/profile")}},{key:"back_alert",value:function(){this.setState({class_alert:"hide"})}},{key:"barter",value:function(){this.state.post.author!==localStorage.getItem("user")?this.setState({class_popup_barter:"popup-edit"}):this.setState({class_alert_barter:"popup-edit"})}},{key:"barter_yes",value:function(){window.location.replace("http://localhost:3000/trade/"+this.state.post.author)}},{key:"barter_no",value:function(){this.setState({class_popup_barter:"hide"})}},{key:"barter_back_alert",value:function(){this.setState({class_popup_barter:"hide",class_alert_barter:"hide"})}},{key:"render",value:function(){return Object(m.jsxs)("div",{className:"detail",children:[Object(m.jsx)("div",{className:"detail-info",children:Object(m.jsxs)("div",{className:"detail-info-post",children:[Object(m.jsx)("img",{width:"250",height:"250",className:"detail-image",src:this.state.post.image}),Object(m.jsxs)("div",{className:"detail-information",children:[Object(m.jsxs)("h5",{children:["Item: ",this.state.post.title]}),Object(m.jsxs)("h6",{children:["Condition: ",this.state.post.condition]}),Object(m.jsxs)("h6",{children:["Author: ",this.state.post.author]}),Object(m.jsxs)("h6",{children:["Category: ",this.state.post.category]}),Object(m.jsxs)("h6",{children:["Status: ",this.state.post.status]}),Object(m.jsxs)("h6",{children:["Type: ",this.state.post.type]}),Object(m.jsxs)("h6",{children:["Price: $",this.state.post.price]}),Object(m.jsx)("input",{type:"button",value:"Buy",onClick:this.buy}),Object(m.jsx)("input",{type:"button",value:"Barter",onClick:this.barter})]})]})}),Object(m.jsxs)("div",{className:"detail-description",children:[Object(m.jsx)("br",{}),Object(m.jsx)("h6",{children:"Description:"}),Object(m.jsxs)("p",{children:[" ",this.state.post.description]}),Object(m.jsx)("hr",{})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("h6",{children:"Comments: "}),this.displayComments()]}),Object(m.jsx)("div",{className:"detail-comment",children:Object(m.jsxs)("form",{onSubmit:this.handleSubmitComment,children:[Object(m.jsx)("textarea",{className:"comment_input",placeholder:"Leave a comment!",onChange:this.onChangeComment,required:!0}),Object(m.jsx)("input",{type:"submit",value:"submit"})]})}),Object(m.jsx)("div",{className:this.state.class_buy,children:Object(m.jsxs)("div",{className:"popup-content",children:["Do you want buy ",this.state.post.title," at $",this.state.post.price,Object(m.jsx)("br",{}),Object(m.jsx)("input",{type:"button",value:"yes",onClick:this.yes}),Object(m.jsx)("input",{type:"button",value:"no",onClick:this.no})]})}),Object(m.jsx)("div",{className:this.state.class_message,children:Object(m.jsxs)("div",{className:"popup-content",children:["Already purchased ",this.state.title,Object(m.jsx)("br",{}),Object(m.jsx)("input",{type:"button",value:"back",onClick:this.back})]})}),Object(m.jsx)("div",{className:this.state.class_alert,children:Object(m.jsxs)("div",{className:"popup-content",children:["This is your own item!",Object(m.jsx)("br",{}),Object(m.jsx)("input",{type:"button",value:"back",onClick:this.back_alert})]})}),Object(m.jsx)("div",{className:this.state.class_popup_barter,children:Object(m.jsxs)("div",{className:"popup-content",children:["Do you want to send a barter offer to ",this.state.post.author,Object(m.jsx)("br",{}),Object(m.jsx)("input",{type:"button",value:"yes",onClick:this.barter_yes}),Object(m.jsx)("input",{type:"button",value:"no",onClick:this.barter_no})]})}),Object(m.jsx)("div",{className:this.state.class_alert_barter,children:Object(m.jsxs)("div",{className:"popup-content",children:["Can't barter with yourself!",Object(m.jsx)("br",{}),Object(m.jsx)("input",{type:"button",value:"back",onClick:this.barter_back_alert})]})})]})}}]),s}(i.Component),w=function(e){Object(j.a)(s,e);var t=Object(u.a)(s);function s(e){var i;return Object(o.a)(this,s),(i=t.call(this,e)).state={title:"",type:"sell",price:0,condition:"brand new",description:"",category:"electronic",image:"",post_sell:[],post_buy:[],class_edit:"hide",class_delete:"hide",class_new:"hide",post_beingEdited:{},post_beingDeleted:{},post_beingReviewed:{},post_beingCommented:{},edit_title:"",edit_type:"sell",edit_price:0,edit_condition:"brand new",edit_description:"",edit_id:"",edit_image:"",edit_category:"electronic",class_message_edit:"hide",class_message_delete:"hide",class_message_new:"hide",class_message_comment:"hide",class_div_selling:"profile-post-selling",class_div_buying:"profile-post-buying",class_div_new:"profile-post-new",class_review:"hide",class_comment:"hide",comment:"",comment_attitude:"positive"},i.handleChangeTitle=i.handleChangeTitle.bind(Object(h.a)(i)),i.handleChangeType=i.handleChangeType.bind(Object(h.a)(i)),i.handleChangePrice=i.handleChangePrice.bind(Object(h.a)(i)),i.handleChangeCondition=i.handleChangeCondition.bind(Object(h.a)(i)),i.handleChangeDescription=i.handleChangeDescription.bind(Object(h.a)(i)),i.handleChangeImage=i.handleChangeImage.bind(Object(h.a)(i)),i.handleSubmitNewPost=i.handleSubmitNewPost.bind(Object(h.a)(i)),i.displaySellPosts=i.displaySellPosts.bind(Object(h.a)(i)),i.displayBuyPosts=i.displayBuyPosts.bind(Object(h.a)(i)),i.openEdit=i.openEdit.bind(Object(h.a)(i)),i.closeEdit=i.closeEdit.bind(Object(h.a)(i)),i.openDelete=i.openDelete.bind(Object(h.a)(i)),i.closeDelete=i.closeDelete.bind(Object(h.a)(i)),i.handleChangeEditTitle=i.handleChangeEditTitle.bind(Object(h.a)(i)),i.handleChangeEditType=i.handleChangeEditType.bind(Object(h.a)(i)),i.handleChangeEditPrice=i.handleChangeEditPrice.bind(Object(h.a)(i)),i.handleChangeEditCondition=i.handleChangeEditCondition.bind(Object(h.a)(i)),i.handleChangeEditImage=i.handleChangeEditImage.bind(Object(h.a)(i)),i.handleChangeEditDescription=i.handleChangeEditDescription.bind(Object(h.a)(i)),i.handleSubmitEditPost=i.handleSubmitEditPost.bind(Object(h.a)(i)),i.openNewPost=i.openNewPost.bind(Object(h.a)(i)),i.closeNew=i.closeNew.bind(Object(h.a)(i)),i.EditPost=i.EditPost.bind(Object(h.a)(i)),i.closeMessageEdit=i.closeMessageEdit.bind(Object(h.a)(i)),i.delete=i.delete.bind(Object(h.a)(i)),i.closeMessageDelete=i.closeMessageDelete.bind(Object(h.a)(i)),i.closeMessageNew=i.closeMessageNew.bind(Object(h.a)(i)),i.openDetail=i.openDetail.bind(Object(h.a)(i)),i.closeDetail=i.closeDetail.bind(Object(h.a)(i)),i.openComment=i.openComment.bind(Object(h.a)(i)),i.closeComment=i.closeComment.bind(Object(h.a)(i)),i.handleChangeComment=i.handleChangeComment.bind(Object(h.a)(i)),i.handleSubmitComment=i.handleSubmitComment.bind(Object(h.a)(i)),i.handleChangeAttitude=i.handleChangeAttitude.bind(Object(h.a)(i)),i.closeMessageComment=i.closeMessageComment.bind(Object(h.a)(i)),i.handleChangeCategory=i.handleChangeCategory.bind(Object(h.a)(i)),i.handleChangeEditCategory=i.handleChangeEditCategory.bind(Object(h.a)(i)),i}return Object(d.a)(s,[{key:"componentDidMount",value:function(){this.retriveData()}},{key:"retriveData",value:function(){var e=this;b.a.post("http://localhost:4000/post/find/type",{author:localStorage.getItem("user"),type:"sell"}).then((function(t){e.setState({post_sell:t.data})})),b.a.post("http://localhost:4000/post/find/type",{author:localStorage.getItem("user"),type:"buy"}).then((function(t){e.setState({post_buy:t.data})}))}},{key:"handleChangeTitle",value:function(e){this.setState({title:e.target.value})}},{key:"handleChangeEditTitle",value:function(e){this.setState({edit_title:e.target.value})}},{key:"handleChangeType",value:function(e){this.setState({type:e.target.value})}},{key:"handleChangeEditType",value:function(e){this.setState({edit_type:e.target.value})}},{key:"handleChangeImage",value:function(e){this.setState({image:e.target.value})}},{key:"handleChangeEditImage",value:function(e){this.setState({edit_image:e.target.value})}},{key:"handleChangeCategory",value:function(e){this.setState({category:e.target.value})}},{key:"handleChangeEditCategory",value:function(e){this.setState({edit_category:e.target.value})}},{key:"handleChangePrice",value:function(e){this.setState({price:e.target.value})}},{key:"handleChangeEditPrice",value:function(e){this.setState({edit_price:e.target.value})}},{key:"handleChangeCondition",value:function(e){this.setState({condition:e.target.value})}},{key:"handleChangeEditCondition",value:function(e){this.setState({edit_condition:e.target.value})}},{key:"handleChangeDescription",value:function(e){this.setState({description:e.target.value})}},{key:"handleChangeEditDescription",value:function(e){this.setState({edit_description:e.target.value})}},{key:"handleChangeComment",value:function(e){this.setState({comment:e.target.value})}},{key:"handleChangeAttitude",value:function(e){this.setState({comment_attitude:e.target.value})}},{key:"handleSubmitNewPost",value:function(e){var t=this;e.preventDefault();var s={title:this.state.title,author:localStorage.getItem("user"),type:this.state.type,price:this.state.price,status:"available",condition:this.state.condition,description:this.state.description,category:this.state.category,image:this.state.image};b.a.post("http://localhost:4000/post/add",s).then((function(){t.setState({class_message_new:"",class_div_selling:"hide",class_div_buying:"hide",class_div_new:"hide",class_new:"hide"})})),console.log(s)}},{key:"handleSubmitEditPost",value:function(e){var t=this;e.preventDefault();var s={title:this.state.edit_title,type:this.state.edit_type,price:this.state.edit_price,condition:this.state.edit_condition,description:this.state.edit_description,category:this.state.edit_category,image:this.state.edit_image};b.a.post("http://localhost:4000/post/update/info/"+this.state.edit_id,s).then((function(){t.setState({class_message_edit:"",class_div_selling:"hide",class_div_buying:"hide",class_div_new:"hide",class_edit:"hide"})})),console.log(s)}},{key:"handleSubmitComment",value:function(e){var t=this;e.preventDefault();var s=this.state.comment_attitude,i=this.state.post_beingCommented.sellerOrBuyer,a={user:localStorage.getItem("user"),postTitle:this.state.post_beingCommented.title,postId:this.state.post_beingCommented._id,comment:this.state.comment,postType:this.state.post_beingCommented.type};"positive"==s?(b.a.post("http://localhost:4000/user/update/positiveComment/"+i,{comment:a}).then((function(e){console.log(e)})).then((function(){b.a.post("http://localhost:4000/post/update/status/"+t.state.post_beingCommented._id,{status:"commented"})})),this.setState({class_message_comment:"",class_div_selling:"hide",class_div_buying:"hide",class_div_new:"hide",class_comment:"hide"})):(b.a.post("http://localhost:4000/user/update/negativeComment/"+i,{comment:a}).then((function(){b.a.post("http://localhost:4000/post/update/status/"+t.state.post_beingCommented._id,{status:"commented"})})),this.setState({class_message_comment:"",class_div_selling:"hide",class_div_buying:"hide",class_div_new:"hide",class_comment:"hide"}))}},{key:"displaySellPosts",value:function(){var e=this;return this.state.post_sell.map((function(t){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:t.title}),Object(m.jsx)("td",{children:t.price}),Object(m.jsx)("td",{children:t.status}),e.actions(t)]})}))}},{key:"displayBuyPosts",value:function(){var e=this;return this.state.post_buy.map((function(t){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:t.title}),Object(m.jsx)("td",{children:t.price}),Object(m.jsx)("td",{children:t.status}),e.actions(t)]})}))}},{key:"actions",value:function(e){var t=this;return"available"==e.status?Object(m.jsxs)("td",{children:[Object(m.jsx)("input",{type:"button",onClick:function(){return t.openEdit(e)},value:"Edit"}),Object(m.jsx)("input",{type:"button",onClick:function(){return t.openDelete(e)},value:"Delete"})]}):"temporarily unavailable"==e.status?Object(m.jsx)("tr",{children:Object(m.jsx)("input",{type:"button",onClick:function(){return t.openDetail(e)},value:"Detail"})}):"dealt"==e.status?Object(m.jsxs)("tr",{children:[Object(m.jsx)("input",{type:"button",onClick:function(){return t.openDetail(e)},value:"Detail"}),Object(m.jsx)("input",{type:"button",onClick:function(){return t.openComment(e)},value:"Comment"})]}):"commented"==e.status?Object(m.jsx)("tr",{children:Object(m.jsx)("input",{type:"button",onClick:function(){return t.openDetail(e)},value:"Detail"})}):void 0}},{key:"openEdit",value:function(e){this.setState({class_edit:"popup-edit",edit_title:e.title,edit_type:e.type,edit_price:e.price,edit_condition:e.condition,edit_description:e.description,edit_id:e._id,edit_image:e.image})}},{key:"openDetail",value:function(e){this.setState({post_beingReviewed:e,class_review:"popup-edit"})}},{key:"openComment",value:function(e){this.setState({post_beingCommented:e,class_comment:"popup-edit"})}},{key:"EditPost",value:function(){return Object(m.jsxs)("div",{className:"popup-edit-content",children:[Object(m.jsx)("h6",{children:"Edit post:"}),Object(m.jsxs)("form",{onSubmit:this.handleSubmitEditPost,children:[Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{for:"title",children:"Title: "}),Object(m.jsx)("input",{id:"title",value:this.state.edit_title,onChange:this.handleChangeEditTitle,required:!0})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{for:"image",children:"Image URL: "}),Object(m.jsx)("input",{id:"image",value:this.state.edit_image,onChange:this.handleChangeEditImage})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{for:"type",children:"Type: "}),Object(m.jsxs)("select",{id:"type",value:this.state.edit_type,onChange:this.handleChangeEditType,children:[Object(m.jsx)("option",{value:"sell",children:"sell"}),Object(m.jsx)("option",{value:"buy",children:"buy"})]})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{for:"category",children:"category: "}),Object(m.jsxs)("select",{id:"category",value:this.state.edit_category,onChange:this.handleChangeEditCategory,children:[Object(m.jsx)("option",{value:"electronic",children:"electronic"}),Object(m.jsx)("option",{value:"kitchen",children:"kitchen"}),Object(m.jsx)("option",{value:"furniture",children:"furniture"}),Object(m.jsx)("option",{value:"home",children:"home"})]})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{for:"price",children:"Price: "}),Object(m.jsx)("input",{type:"number",id:"price",min:"0",value:this.state.edit_price,onChange:this.handleChangeEditPrice})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{for:"condition",children:"Condition: "}),Object(m.jsxs)("select",{id:"condition",value:this.state.edit_condition,onChange:this.handleChangeEditCondition,children:[Object(m.jsx)("option",{value:"brand new",children:"Brand New"}),Object(m.jsx)("option",{value:"like new",children:"Like New"}),Object(m.jsx)("option",{value:"good",children:"Good"}),Object(m.jsx)("option",{value:"fair",children:"Fair"}),Object(m.jsx)("option",{value:"poor",children:"Poor"})]})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{for:"description",children:"Description:"}),Object(m.jsx)("textarea",{id:"description",value:this.state.edit_description,onChange:this.handleChangeEditDescription,required:!0})]}),Object(m.jsx)("input",{type:"submit",value:"submit"})]})]})}},{key:"reviewDetail",value:function(){return Object(m.jsxs)("div",{className:this.state.class_review,children:[Object(m.jsxs)("div",{className:"popup-edit-content",children:[Object(m.jsx)("h6",{children:"item"}),this.state.post_beingReviewed.title,Object(m.jsx)("hr",{}),Object(m.jsx)("h6",{children:"price"}),this.state.post_beingReviewed.price,Object(m.jsx)("hr",{}),Object(m.jsx)("h6",{children:"condition"}),this.state.post_beingReviewed.condition,Object(m.jsx)("hr",{}),Object(m.jsx)("h6",{children:"description"}),this.state.post_beingReviewed.description,Object(m.jsx)("hr",{}),Object(m.jsx)("h6",{children:"buyer/seller"}),this.state.post_beingReviewed.sellerOrBuyer,Object(m.jsx)("hr",{})]}),Object(m.jsx)("input",{type:"button",value:"close",onClick:this.closeDetail})]})}},{key:"closeDetail",value:function(){this.setState({class_review:"hide"})}},{key:"closeEdit",value:function(){this.setState({class_edit:"hide"})}},{key:"openDelete",value:function(e){this.setState({class_delete:"popup-delete",post_beingDeleted:e})}},{key:"deletePost",value:function(){return Object(m.jsxs)("div",{className:"popup-content",children:[Object(m.jsx)("h6",{children:"Do you really want to delete the post below permanently?"}),Object(m.jsx)("hr",{}),this.state.post_beingDeleted.title,Object(m.jsx)("br",{}),Object(m.jsx)("input",{type:"button",value:"yes",onClick:this.delete}),Object(m.jsx)("input",{type:"button",value:"no",onClick:this.closeDelete})]})}},{key:"delete",value:function(){var e=this;b.a.delete("http://localhost:4000/post/delete/"+this.state.post_beingDeleted._id).then((function(){e.setState({class_message_delete:"",class_div_selling:"hide",class_div_buying:"hide",class_div_new:"hide",class_delete:"hide"})}))}},{key:"closeDelete",value:function(){this.setState({class_delete:"hide"})}},{key:"openNewPost",value:function(){this.setState({class_new:"popup-edit"})}},{key:"closeNew",value:function(){this.setState({class_new:"hide"})}},{key:"closeComment",value:function(){this.setState({class_comment:"hide"})}},{key:"closeMessageEdit",value:function(){this.retriveData(),this.setState({class_message_edit:"hide",class_div_selling:"profile-post-selling",class_div_buying:"profile-post-buying",class_div_new:"profile-post-new",class_edit:"hide"})}},{key:"closeMessageDelete",value:function(){this.retriveData(),this.setState({class_message_delete:"hide",class_div_selling:"profile-post-selling",class_div_buying:"profile-post-buying",class_div_new:"profile-post-new",class_delete:"hide"})}},{key:"closeMessageNew",value:function(){this.retriveData(),this.setState({class_message_new:"hide",class_div_selling:"profile-post-selling",class_div_buying:"profile-post-buying",class_div_new:"profile-post-new",class_new:"hide"})}},{key:"closeMessageComment",value:function(){this.retriveData(),this.setState({class_message_comment:"hide",class_div_selling:"profile-post-selling",class_div_buying:"profile-post-buying",class_div_new:"profile-post-new",class_comment:"hide"})}},{key:"render",value:function(){return Object(m.jsxs)("div",{className:"profile-post",children:[Object(m.jsxs)("div",{className:this.state.class_div_selling,children:[Object(m.jsx)("h5",{children:"Your selling posts"}),Object(m.jsxs)("table",{children:[Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"Title"}),Object(m.jsx)("th",{children:"Price"}),Object(m.jsx)("th",{children:"Status"}),Object(m.jsx)("th",{children:"Actions"})]}),this.displaySellPosts()]}),Object(m.jsx)("hr",{})]}),Object(m.jsxs)("div",{className:this.state.class_div_buying,children:[Object(m.jsx)("h5",{children:"Your buying posts"}),Object(m.jsxs)("table",{children:[Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"Title"}),Object(m.jsx)("th",{children:"Price"}),Object(m.jsx)("th",{children:"Status"}),Object(m.jsx)("th",{children:"Actions"})]}),this.displayBuyPosts()]}),Object(m.jsx)("hr",{})]}),this.reviewDetail(),Object(m.jsxs)("div",{className:this.state.class_edit,children:[this.EditPost(),Object(m.jsx)("input",{onClick:this.closeEdit,type:"button",value:"close"})]}),Object(m.jsx)("div",{className:this.state.class_delete,children:Object(m.jsx)("div",{children:this.deletePost()})}),Object(m.jsxs)("div",{className:this.state.class_div_new,children:[Object(m.jsx)("input",{onClick:this.openNewPost,type:"button",value:"create a new post"}),Object(m.jsxs)("div",{className:this.state.class_new,children:[Object(m.jsx)("div",{className:"popup-edit-content",children:Object(m.jsxs)("form",{onSubmit:this.handleSubmitNewPost,children:[Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{for:"title",children:"Title: "}),Object(m.jsx)("input",{id:"title",value:this.state.title,onChange:this.handleChangeTitle,required:!0})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{for:"image",children:"Image URL: "}),Object(m.jsx)("input",{id:"image",value:this.state.image,onChange:this.handleChangeImage,required:!0})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{for:"type",children:"Type: "}),Object(m.jsxs)("select",{id:"type",value:this.state.type,onChange:this.handleChangeType,children:[Object(m.jsx)("option",{value:"sell",children:"sell"}),Object(m.jsx)("option",{value:"buy",children:"buy"})]})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{for:"category",children:"category: "}),Object(m.jsxs)("select",{id:"category",value:this.state.category,onChange:this.handleChangeCategory,children:[Object(m.jsx)("option",{value:"electronic",children:"electronic"}),Object(m.jsx)("option",{value:"kitchen",children:"kitchen"}),Object(m.jsx)("option",{value:"furniture",children:"furniture"}),Object(m.jsx)("option",{value:"home",children:"home"})]})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{for:"price",children:"Price: "}),Object(m.jsx)("input",{type:"number",id:"price",min:"0",value:this.state.price,onChange:this.handleChangePrice})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{for:"condition",children:"Condition: "}),Object(m.jsxs)("select",{id:"condition",value:this.state.condition,onChange:this.handleChangeCondition,children:[Object(m.jsx)("option",{value:"brand new",children:"Brand New"}),Object(m.jsx)("option",{value:"like new",children:"Like New"}),Object(m.jsx)("option",{value:"good",children:"Good"}),Object(m.jsx)("option",{value:"fair",children:"Fair"}),Object(m.jsx)("option",{value:"poor",children:"Poor"})]})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{for:"description",children:"Description:"}),Object(m.jsx)("textarea",{id:"description",value:this.state.description,onChange:this.handleChangeDescription,required:!0})]}),Object(m.jsx)("input",{type:"submit",value:"submit"})]})}),Object(m.jsx)("input",{onClick:this.closeNew,type:"button",value:"close"})]})]}),Object(m.jsxs)("div",{className:this.state.class_message_edit,children:["Post updated!",Object(m.jsx)("input",{type:"button",value:"Back",onClick:this.closeMessageEdit})]}),Object(m.jsxs)("div",{className:this.state.class_message_delete,children:["Post deleted!",Object(m.jsx)("input",{type:"button",value:"Back",onClick:this.closeMessageDelete})]}),Object(m.jsxs)("div",{className:this.state.class_message_new,children:["Post createded!",Object(m.jsx)("input",{type:"button",value:"Back",onClick:this.closeMessageNew})]}),Object(m.jsxs)("div",{className:this.state.class_comment,children:[Object(m.jsx)("div",{className:"popup-edit-content",children:Object(m.jsxs)("form",{onSubmit:this.handleSubmitComment,children:[Object(m.jsx)("h6",{children:"leave your comment below"}),Object(m.jsx)("hr",{}),Object(m.jsxs)("select",{value:this.state.comment_attitude,onChange:this.handleChangeAttitude,children:[Object(m.jsx)("option",{children:"positive"}),Object(m.jsx)("option",{children:"negative"})]}),Object(m.jsx)("hr",{}),Object(m.jsx)("textarea",{value:this.state.comment,onChange:this.handleChangeComment}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{type:"submit",value:"submit"})]})}),Object(m.jsx)("input",{type:"button",value:"close",onClick:this.closeComment})]}),Object(m.jsxs)("div",{className:this.state.class_message_comment,children:["Comment added!",Object(m.jsx)("input",{type:"button",value:"Back",onClick:this.closeMessageComment})]})]})}}]),s}(i.Component),N=function(e){Object(j.a)(s,e);var t=Object(u.a)(s);function s(e){var i;return Object(o.a)(this,s),(i=t.call(this,e)).state={email:"",password:"",confirmPassword:"",state:"massachusetts",city:"boston",neighborhood:"allston",address:"",phoneNumber:"",class_success_message:"hide",class_update_profile:""},i.handleChangeEmail=i.handleChangeEmail.bind(Object(h.a)(i)),i.handleChangePassword=i.handleChangePassword.bind(Object(h.a)(i)),i.handleChangeConfirmPassword=i.handleChangeConfirmPassword.bind(Object(h.a)(i)),i.handleChangeState=i.handleChangeState.bind(Object(h.a)(i)),i.handleChangeCity=i.handleChangeCity.bind(Object(h.a)(i)),i.handeChangeNeighborhood=i.handeChangeNeighborhood.bind(Object(h.a)(i)),i.handleChangeAddress=i.handleChangeAddress.bind(Object(h.a)(i)),i.handleChangePhoneNumber=i.handleChangePhoneNumber.bind(Object(h.a)(i)),i.handleSubmitUpdate=i.handleSubmitUpdate.bind(Object(h.a)(i)),i.closeMessage=i.closeMessage.bind(Object(h.a)(i)),i}return Object(d.a)(s,[{key:"handleChangeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"handleChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleChangeConfirmPassword",value:function(e){this.setState({confirmPassword:e.target.value})}},{key:"handleChangeState",value:function(e){this.setState({state:e.target.value})}},{key:"handleChangeCity",value:function(e){this.setState({city:e.target.value})}},{key:"handeChangeNeighborhood",value:function(e){this.setState({neighborhood:e.target.value})}},{key:"handleChangeAddress",value:function(e){this.setState({address:e.target.value})}},{key:"handleChangePhoneNumber",value:function(e){this.setState({phoneNumber:e.target.value})}},{key:"handleSubmitUpdate",value:function(e){var t=this;e.preventDefault();var s={email:this.state.email,state:this.state.state,city:this.state.city,neighborhood:this.state.neighborhood,address:this.state.address,phone:this.state.phoneNumber};b.a.post("http://localhost:4000/user/update/profile/"+localStorage.getItem("user"),s).then((function(e){console.log(e)})).then((function(){t.setState({class_success_message:"",class_update_profile:"hide"})}))}},{key:"closeMessage",value:function(){this.setState({class_success_message:"hide",class_update_profile:"",email:"",state:"massachusetts",city:"boston",neighborhood:"allston",address:"",phoneNumber:""})}},{key:"render",value:function(){return Object(m.jsxs)("div",{children:[Object(m.jsxs)("form",{onSubmit:this.handleSubmitUpdate,className:this.state.class_update_profile,children:[Object(m.jsxs)("table",{children:[Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"E-mail"}),Object(m.jsx)("td",{children:Object(m.jsx)("input",{type:"email",placeholder:"exp: thesis@gmail.com",value:this.state.email,onChange:this.handleChangeEmail,required:!0})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"State"}),Object(m.jsx)("td",{children:Object(m.jsx)("select",{value:this.state.state,onChange:this.handleChangeState,children:Object(m.jsx)("option",{children:"Massachusetts"})})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"City"}),Object(m.jsx)("td",{children:Object(m.jsx)("select",{value:this.state.city,onChange:this.handleChangeCity,children:Object(m.jsx)("option",{children:"Boston"})})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"Neighborhood"}),Object(m.jsx)("td",{children:Object(m.jsxs)("select",{value:this.state.neighborhood,onChange:this.handeChangeNeighborhood,children:[Object(m.jsx)("option",{value:"allston",children:"Allston"}),Object(m.jsx)("option",{value:"back bay",children:"Back Bay"}),Object(m.jsx)("option",{value:"downtown",children:" Downtown"}),Object(m.jsx)("option",{value:"fenway",children:"Fenway"}),Object(m.jsx)("option",{value:"south end",children:"South End"})]})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"Address"}),Object(m.jsx)("td",{children:Object(m.jsx)("input",{value:this.state.address,onChange:this.handleChangeAddress,required:!0})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"Phone Number"}),Object(m.jsx)("td",{children:Object(m.jsx)("input",{placeholder:"123-456-7890",value:this.state.phoneNumber,onChange:this.handleChangePhoneNumber,required:!0})})]})]}),Object(m.jsx)("input",{type:"submit",value:"submit"})]}),Object(m.jsxs)("div",{className:this.state.class_success_message,children:["Profile updated!",Object(m.jsx)("input",{onClick:this.closeMessage,type:"button",value:"Go back"})]})]})}}]),s}(i.Component),S=function(e){Object(j.a)(s,e);var t=Object(u.a)(s);function s(e){var i;return Object(o.a)(this,s),(i=t.call(this,e)).state={user:{username:""},user_positiveComment:[],user_history:[{}]},i.positiveComment=i.positiveComment.bind(Object(h.a)(i)),i.history=i.history.bind(Object(h.a)(i)),i}return Object(d.a)(s,[{key:"componentDidMount",value:function(){var e=this;b.a.get("http://localhost:4000/user/"+localStorage.getItem("user")).then((function(t){e.setState({user:t.data})})),b.a.get("http://localhost:4000/post/find/sellerOrBuyer/"+localStorage.getItem("user")).then((function(t){e.setState({user_history:t.data})}))}},{key:"positiveComment",value:function(){return this.state.user_positiveComment.map((function(e,t){return Object(m.jsxs)("p",{children:[e,",",t]})}))}},{key:"history",value:function(){return this.state.user_history.map((function(e,t){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:e.title}),Object(m.jsx)("td",{children:e.type}),Object(m.jsx)("td",{children:e.price}),Object(m.jsx)("td",{children:e.author})]})}))}},{key:"render",value:function(){return Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:"profile-profile-info",children:[Object(m.jsx)("hr",{}),"username:",Object(m.jsx)("br",{}),this.state.user.username,Object(m.jsx)("hr",{}),"email:",Object(m.jsx)("br",{}),this.state.user.email,Object(m.jsx)("hr",{}),"address:",Object(m.jsx)("br",{}),this.state.user.address,Object(m.jsx)("hr",{}),"phone:",Object(m.jsx)("br",{}),this.state.user.phone,Object(m.jsx)("hr",{}),"neighborhood:",Object(m.jsx)("br",{}),this.state.user.neighborhood,Object(m.jsx)("hr",{})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("h6",{children:"Trade history"}),Object(m.jsxs)("table",{children:[Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"Item"}),Object(m.jsx)("th",{children:"Type"}),Object(m.jsx)("th",{children:"Price"}),Object(m.jsx)("th",{children:"Seller"})]}),this.history()]})]})]})}}]),s}(i.Component),P=function(e){Object(j.a)(s,e);var t=Object(u.a)(s);function s(e){var i;return Object(o.a)(this,s),(i=t.call(this,e)).state={offer_sent:[{creator:"",createdAt:""}],offer_received:[{creator:"",createdAt:""}],offer_sent_displayed:{creatorItems:[],recipientItems:[],status:""},offer_received_displayed:{creatorItems:[],recipientItems:[]},class_popup_sent:"hide",class_popup_received:"hide",class_offer_sent:"offer-sent",class_offer_received:"offer-received",class_message_accept:"hide",class_message_refuse:"hide"},i.displayCreatorItemsSent=i.displayCreatorItemsSent.bind(Object(h.a)(i)),i.displayRecipientItemsSent=i.displayRecipientItemsSent.bind(Object(h.a)(i)),i.closeSent=i.closeSent.bind(Object(h.a)(i)),i.closeReceived=i.closeReceived.bind(Object(h.a)(i)),i.acceptOffer=i.acceptOffer.bind(Object(h.a)(i)),i.closeMessageAccept=i.closeMessageAccept.bind(Object(h.a)(i)),i.refuseOffer=i.refuseOffer.bind(Object(h.a)(i)),i.closeMessageRefuse=i.closeMessageRefuse.bind(Object(h.a)(i)),i}return Object(d.a)(s,[{key:"componentDidMount",value:function(){this.retriveData()}},{key:"retriveData",value:function(){var e=this;b.a.post("http://localhost:4000/offer/search/creator",{user:localStorage.getItem("user")}).then((function(t){e.setState({offer_sent:t.data})})),b.a.post("http://localhost:4000/offer/search/recipient",{user:localStorage.getItem("user")}).then((function(t){e.setState({offer_received:t.data})}))}},{key:"displayOfferSent",value:function(){var e=this;return this.state.offer_sent.map((function(t){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:t.recipient}),Object(m.jsx)("td",{children:t.createdAt.substring(0,10)}),Object(m.jsx)("td",{children:t.createdAt.substring(11,16)}),Object(m.jsx)("td",{children:t.status}),Object(m.jsx)("td",{children:Object(m.jsx)("input",{onClick:function(){return e.checkMoreSent(t)},type:"button",value:"More Info"})})]})}))}},{key:"displayOfferReceived",value:function(){var e=this;return this.state.offer_received.map((function(t){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:t.creator}),Object(m.jsx)("td",{children:t.createdAt.substring(0,10)}),Object(m.jsx)("td",{children:t.createdAt.substring(11,16)}),Object(m.jsx)("td",{children:t.status}),Object(m.jsx)("td",{children:Object(m.jsx)("input",{onClick:function(){return e.response(t)},type:"button",value:"Response"})})]})}))}},{key:"checkMoreSent",value:function(e){this.setState({class_popup_sent:"popup-edit",offer_sent_displayed:e})}},{key:"response",value:function(e){this.setState({class_popup_received:"popup-edit",offer_received_displayed:e})}},{key:"displayCreatorItemsSent",value:function(){return this.state.offer_sent_displayed.creatorItems.map((function(e){return Object(m.jsxs)("div",{className:"trade-window-div-add",children:[Object(m.jsx)("img",{className:"trade-window-img",src:e.image}),Object(m.jsx)("p",{children:e.title})]})}))}},{key:"displayCreatorItemsReceived",value:function(){return this.state.offer_received_displayed.creatorItems.map((function(e){return Object(m.jsxs)("div",{className:"trade-window-div-add",children:[Object(m.jsx)("img",{className:"trade-window-img",src:e.image}),Object(m.jsx)("p",{children:e.title})]})}))}},{key:"displayRecipientItemsSent",value:function(){return this.state.offer_sent_displayed.recipientItems.map((function(e){return Object(m.jsxs)("div",{className:"trade-window-div-add",children:[Object(m.jsx)("img",{className:"trade-window-img",src:e.image}),Object(m.jsx)("p",{children:e.title})]})}))}},{key:"displayRecipientItemsReceived",value:function(){return this.state.offer_received_displayed.recipientItems.map((function(e){return Object(m.jsxs)("div",{className:"trade-window-div-add",children:[Object(m.jsx)("img",{className:"trade-window-img",src:e.image}),Object(m.jsx)("p",{children:e.title})]})}))}},{key:"closeSent",value:function(){this.setState({class_popup_sent:"hide"})}},{key:"closeReceived",value:function(){this.setState({class_popup_received:"hide"})}},{key:"acceptOffer",value:function(){var e=this.state.offer_received_displayed;b.a.post("http://localhost:4000/offer/updateStatus/"+e._id,{status:"accepted"});for(var t=0;t<e.creatorItems.length;t++)b.a.post("http://localhost:4000/post/update/status/"+e.creatorItems[t]._id,{status:"dealt"}),b.a.post("http://localhost:4000/post/update/sellerOrBuyer/"+e.creatorItems[t]._id,{sellerOrBuyer:e.recipient});for(var s=0;s<e.recipientItems.length;s++)b.a.post("http://localhost:4000/post/update/status/"+e.recipientItems[s]._id,{status:"dealt"}),b.a.post("http://localhost:4000/post/update/sellerOrBuyer/"+e.recipientItems[s]._id,{sellerOrBuyer:e.creator});this.setState({class_offer_sent:"hide",class_offer_received:"hide",class_popup_received:"hide",class_message_accept:""})}},{key:"refuseOffer",value:function(){var e=this.state.offer_received_displayed;b.a.post("http://localhost:4000/offer/updateStatus/"+e._id,{status:"refused"});for(var t=0;t<e.creatorItems.length;t++)b.a.post("http://localhost:4000/post/update/status/"+e.creatorItems[t]._id,{status:"available"});this.setState({class_offer_sent:"hide",class_offer_received:"hide",class_popup_received:"hide",class_message_refuse:""})}},{key:"closeMessageAccept",value:function(){this.retriveData(),this.setState({class_offer_sent:"offer-sent",class_offer_received:"offer-received",class_message_accept:"hide"})}},{key:"closeMessageRefuse",value:function(){this.retriveData(),this.setState({class_offer_sent:"offer-sent",class_offer_received:"offer-received",class_message_refuse:"hide"})}},{key:"displayOptions",value:function(){return"in progress"==this.state.offer_received_displayed.status?Object(m.jsxs)("div",{children:[Object(m.jsx)("hr",{}),Object(m.jsx)("h6",{children:"What is your decision?"}),Object(m.jsx)("input",{type:"button",value:"Accept",onClick:this.acceptOffer}),Object(m.jsx)("input",{type:"button",value:"Refuse",onClick:this.refuseOffer})]}):Object(m.jsxs)("div",{children:[Object(m.jsx)("hr",{}),Object(m.jsx)("h6",{children:"You already responsed!"})]})}},{key:"render",value:function(){return Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:this.state.class_offer_sent,children:[Object(m.jsx)("br",{}),Object(m.jsx)("h6",{children:"offer sent"}),Object(m.jsx)("hr",{}),Object(m.jsxs)("table",{children:[Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"recipient"}),Object(m.jsx)("th",{children:"date"}),Object(m.jsx)("th",{children:"time"}),Object(m.jsx)("th",{children:"status"}),Object(m.jsx)("th",{children:"action"})]}),this.displayOfferSent()]})]}),Object(m.jsxs)("div",{className:this.state.class_popup_sent,children:[Object(m.jsxs)("div",{className:"popup-edit-content",children:[Object(m.jsxs)("div",{className:"trade-window-div-add",children:[Object(m.jsx)("h6",{children:"You get"}),this.displayRecipientItemsSent()]}),Object(m.jsx)("h6",{children:"currency $"}),this.state.offer_sent_displayed.recipientCurrency,Object(m.jsx)("hr",{}),Object(m.jsxs)("div",{className:"trade-window-div-add",children:[Object(m.jsx)("h6",{children:"They get"}),this.displayCreatorItemsSent()]}),Object(m.jsx)("h6",{children:"currency $"}),this.state.offer_sent_displayed.creatorCurrency,Object(m.jsx)("hr",{}),Object(m.jsx)("h6",{children:"Message you sent"}),this.state.offer_sent_displayed.message]}),Object(m.jsx)("input",{onClick:this.closeSent,type:"button",value:"Close"})]}),Object(m.jsxs)("div",{className:this.state.class_offer_received,children:[Object(m.jsx)("br",{}),Object(m.jsx)("h6",{children:"offer received"}),Object(m.jsx)("hr",{}),Object(m.jsxs)("table",{children:[Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"creator"}),Object(m.jsx)("th",{children:"date"}),Object(m.jsx)("th",{children:"time"}),Object(m.jsx)("th",{children:"status"}),Object(m.jsx)("th",{children:"action"})]}),this.displayOfferReceived()]})]}),Object(m.jsxs)("div",{className:this.state.class_popup_received,children:[Object(m.jsxs)("div",{className:"popup-edit-content",children:[Object(m.jsxs)("div",{className:"trade-window-div-add",children:[Object(m.jsx)("h6",{children:"You get"}),this.displayCreatorItemsReceived()]}),Object(m.jsx)("h6",{children:"currency $"}),this.state.offer_received_displayed.creatorCurrency,Object(m.jsx)("hr",{}),Object(m.jsxs)("div",{className:"trade-window-div-add",children:[Object(m.jsx)("h6",{children:"They get"}),this.displayRecipientItemsReceived()]}),Object(m.jsx)("h6",{children:"currency $"}),this.state.offer_received_displayed.recipientCurrency,Object(m.jsx)("hr",{}),Object(m.jsx)("h6",{children:"Message you received"}),this.state.offer_received_displayed.message,this.displayOptions()]}),Object(m.jsx)("input",{onClick:this.closeReceived,type:"button",value:"Close"})]}),Object(m.jsxs)("div",{className:this.state.class_message_accept,children:["offer accepted!",Object(m.jsx)("input",{type:"button",value:"back",onClick:this.closeMessageAccept})]}),Object(m.jsxs)("div",{className:this.state.class_message_refuse,children:["offer refused!",Object(m.jsx)("input",{type:"button",value:"back",onClick:this.closeMessageRefuse})]})]})}}]),s}(i.Component),I=function(e){Object(j.a)(s,e);var t=Object(u.a)(s);function s(e){var i;return Object(o.a)(this,s),(i=t.call(this,e)).state={class_profile:"",class_post:"hide",class_update:"hide",class_offer:"hide"},i.profile=i.profile.bind(Object(h.a)(i)),i.post=i.post.bind(Object(h.a)(i)),i.update=i.update.bind(Object(h.a)(i)),i.offer=i.offer.bind(Object(h.a)(i)),i}return Object(d.a)(s,[{key:"profile",value:function(){this.setState({class_profile:"",class_post:"hide",class_update:"hide",class_offer:"hide"})}},{key:"post",value:function(){this.setState({class_profile:"hide",class_post:"",class_update:"hide",class_offer:"hide"})}},{key:"update",value:function(){this.setState({class_profile:"hide",class_post:"hide",class_update:"",class_offer:"hide"})}},{key:"offer",value:function(){this.setState({class_profile:"hide",class_post:"hide",class_update:"hide",class_offer:""})}},{key:"render",value:function(){return Object(m.jsxs)("div",{className:"profile",children:[Object(m.jsxs)("div",{className:"profile-nav",children:[Object(m.jsx)("input",{className:"profile-nav-btn",onClick:this.profile,type:"button",value:"profile"}),Object(m.jsx)("input",{className:"profile-nav-btn",onClick:this.update,type:"button",value:"update profile"}),Object(m.jsx)("input",{className:"profile-nav-btn",onClick:this.post,type:"button",value:"post"}),Object(m.jsx)("input",{className:"profile-nav-btn",onClick:this.offer,type:"button",value:"offer"})]}),Object(m.jsx)("div",{className:this.state.class_profile,children:Object(m.jsx)(S,{})}),Object(m.jsx)("div",{className:this.state.class_update,children:Object(m.jsx)(N,{})}),Object(m.jsx)("div",{className:this.state.class_post,children:Object(m.jsx)(w,{})}),Object(m.jsx)("div",{className:this.state.class_offer,children:Object(m.jsx)(P,{})})]})}}]),s}(i.Component);function D(){return Object(m.jsx)(r.a,{children:Object(m.jsxs)("div",{children:[Object(m.jsx)(O,{}),Object(m.jsx)(l.a,{path:"/thesis",exact:!0,component:v}),Object(m.jsx)(l.a,{path:"/search/:keyword",component:x}),Object(m.jsx)(l.a,{path:"/rating/:username",component:_}),Object(m.jsx)(l.a,{path:"/trade/:username",component:y}),Object(m.jsx)(l.a,{path:"/log",component:C}),Object(m.jsx)(l.a,{path:"/detail/:id",component:k}),Object(m.jsx)(l.a,{path:"/profile",component:I})]})})}var E=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,65)).then((function(t){var s=t.getCLS,i=t.getFID,a=t.getFCP,n=t.getLCP,c=t.getTTFB;s(e),i(e),a(e),n(e),c(e)}))};c.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(D,{})}),document.getElementById("root")),E()}},[[64,1,2]]]);
//# sourceMappingURL=main.d1313da6.chunk.js.map